---
apiVersion: v1
kind: Namespace
metadata:
    name: longhorn-system
---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: longhorn
    namespace: longhorn-system
spec:
    targetNamespace: longhorn-system
    releaseName: longhorn
    chart:
        spec:
            chart: longhorn
            sourceRef:
                kind: HelmRepository
                name: longhorn
                namespace: flux-system
            version: "1.4.0"
    interval: 1h0m0s
    values:
        defaultSettings:
            deletingConfirmationFlag: "true"
        # deletingConfirmationFlag: "true"
        longhornUI:
            replicas: 2
        longhornConversionWebhook:
            replicas: 2
        longhornAdmissionWebhook:
            replicas: 2
        longhornRecoveryBackend:
            replicas: 2
        ingress:
            enabled: false
    install:
        crds: CreateReplace
        disableWait: true
    upgrade:
        crds: CreateReplace
        disableWait: true
